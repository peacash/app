import{_,c as f}from"./index.14a279f6.js";import{o as c,c as p,g as d,w as m,b as n,i as v,v as y,t as g,F as S,d as x,n as I,p as w,a as k,e as b}from"./vendor.c2e542a0.js";const N={data(){return{url_input:"",url:"",urls:[],map:new Map}},methods:{add(e){e.preventDefault();let t=this.url_input;if(!t||this.urls.includes(t)){this.$refs.url_input.focus();return}this.url=t,this.urls.unshift(t),localStorage.setItem("url",t),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url_input=""},remove(e){let t=this.urls[e];this.urls.splice(e,1),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url==t&&(this.url=null,localStorage.removeItem("url"))},select(e){let t=this.urls[e];localStorage.setItem("url",t),this.url=t},select_enter(e,t){e.key=="Enter"&&this.select(t)},update(e,t){if(!e.target.value){this.remove(t),this.$refs.url_input.focus();return}this.urls[t]=e.target.value,localStorage.setItem("urls",JSON.stringify(this.urls))},loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},3e3)},fetchData(){let e=JSON.parse(window.localStorage.getItem("urls"));if(!!e?.length)for(let t of e)this.map.has(t)||this.map.set(t,null),fetch(t+"/sync").then(r=>r.json()).then(r=>{this.map.set(t,r)}).catch(r=>{this.map.set(t,r.toString())})}},mounted(){this.url=localStorage.getItem("url");let e=JSON.parse(localStorage.getItem("urls"));e?.length&&(this.urls=e),this.loop()},unmounted(){clearInterval(this.interval)}},D=e=>(w("data-v-3dc08f7e"),e=e(),k(),e),C={class:"flex flex-col gap-2 md:gap-10 my-2 md:my-10 w-full"},J=D(()=>n("input",{type:"submit",value:"Add",class:"text-black rounded text-sm md:text-lg w-24 sm:w-32 md:w-40 ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 cursor-pointer"},null,-1)),O={class:"flex justify-center text-black"},j={class:"flex flex-col gap-2 sm:gap-2 md:gap-10"},B=["onClick","onKeydown","onInput","value","name"],E=["for"];function V(e,t,r,h,l,a){const i=f;return c(),p("div",C,[d(i,null,{default:m(()=>[n("form",{onSubmit:t[1]||(t[1]=(...s)=>a.add&&a.add(...s)),class:"flex gap-2 md:gap-2 md:gap-10"},[v(n("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.url_input=s),ref:"url_input",class:"text-black rounded ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 w-full",type:"text",placeholder:"http://0.0.0.0:9332"},null,512),[[y,l.url_input]]),J],32)]),_:1}),d(i,null,{default:m(()=>[n("div",O,g(l.url?"Now using - "+l.url:"Configure an API endpoint to use."),1)]),_:1}),d(i,null,{default:m(()=>[n("div",j,[(c(!0),p(S,null,x(l.urls,(s,o)=>(c(),p("div",{key:o},[n("input",{onClick:u=>a.select(o),onKeydown:u=>a.select_enter(u,o),onInput:u=>a.update(u,o),value:s,name:s,class:I(["text-black rounded w-full ring-1 ring-black ring-opacity-10 sm:ring-opacity-20",(l.map.get(s)?.sync?"green":"red")+" "+(s===l.url?"blue ring-opacity-50 sm:ring-opacity-60":"")]),type:"text"},null,42,B),n("label",{for:s,class:"text-xs lg:text-sm h-1 lg:h-2 ml-1"},g(l.map.get(s)),9,E)]))),128))])]),_:1})])}var A=_(N,[["render",V],["__scopeId","data-v-3dc08f7e"]]);const F={mounted(){document.title="Settings - Pea"}};function K(e,t,r,h,l,a){const i=A;return c(),b(i)}var z=_(F,[["render",K]]);export{z as default};
