import{_ as h,c as v}from"./index.71e47493.js";import{o as c,c as p,g as m,w as g,b as n,n as _,i as y,v as x,F as S,d as w,t as d,p as I,a as k,e as b}from"./vendor.c2e542a0.js";const D={data(){return{url_input:"",url:"",urls:[],map:new Map}},methods:{add(e){e.preventDefault();let t=this.url_input;if(!t||this.urls.includes(t)){this.$refs.url_input.focus();return}this.url=t,this.urls.unshift(t),localStorage.setItem("url",t),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url_input=""},remove(e){let t=this.urls[e];this.urls.splice(e,1),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url==t&&(this.url=null,localStorage.removeItem("url"))},select(e){let t=this.urls[e];localStorage.setItem("url",t),this.url=t},select_enter(e,t){e.key=="Enter"&&this.select(t)},update(e,t){if(!e.target.value){this.remove(t),this.$refs.url_input.focus();return}this.urls[t]=e.target.value,localStorage.setItem("urls",JSON.stringify(this.urls))},loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},1e3)},fetchData(){let e=JSON.parse(window.localStorage.getItem("urls"));if(!!e?.length)for(let t of e)this.map.has(t)||this.map.set(t,null),fetch(t+"/sync").then(r=>r.json()).then(r=>{this.map.set(t,r)}).catch(r=>{this.map.set(t,r.toString())})}},mounted(){this.url=localStorage.getItem("url");let e=JSON.parse(localStorage.getItem("urls"));e?.length&&(this.urls=e),this.loop()},unmounted(){clearInterval(this.interval)}},N=e=>(I("data-v-18750a6e"),e=e(),k(),e),B={class:"flex flex-col gap-2 md:gap-10 my-2 md:my-10 w-full"},C=["value"],J=N(()=>n("input",{type:"submit",value:"Add",class:"text-black rounded text-sm md:text-lg w-24 sm:w-32 md:w-40 ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 cursor-pointer"},null,-1)),O={class:"flex flex-col gap-2 sm:gap-2 md:gap-10"},E=["onClick","onKeydown","onInput","value","name"],j=["for"];function V(e,t,r,f,l,a){const i=v;return c(),p("div",B,[m(i,null,{default:g(()=>[n("input",{value:l.url?l.url:"Configure an API endpoint to use.",disabled:"",class:_(["text-black rounded mx-auto w-full flex ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 text-center",l.map.get(l.url)?.status?"green":"red"]),style:{"font-weight":"600","max-width":"20rem"},type:"text",placeholder:"http://0.0.0.0:9332"},null,10,C)]),_:1}),m(i,null,{default:g(()=>[n("form",{onSubmit:t[1]||(t[1]=(...s)=>a.add&&a.add(...s)),class:"flex gap-2 md:gap-2 md:gap-10"},[y(n("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.url_input=s),ref:"url_input",class:"text-black rounded ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 w-full",type:"text",placeholder:"http://0.0.0.0:9332"},null,512),[[x,l.url_input]]),J],32)]),_:1}),m(i,null,{default:g(()=>[n("div",O,[(c(!0),p(S,null,w(l.urls,(s,o)=>(c(),p("div",{key:o},[n("input",{onClick:u=>a.select(o),onKeydown:u=>a.select_enter(u,o),onInput:u=>a.update(u,o),value:s,name:s,class:_(["text-black rounded w-full ring-1 ring-black ring-opacity-10 sm:ring-opacity-20",(l.map.get(s)?.status?"green":"red")+" "+(s===l.url?"blue ring-opacity-50 sm:ring-opacity-60":"")]),type:"text"},null,42,E),n("label",{for:s,class:"text-xs lg:text-sm h-1 lg:h-2 ml-1"},"Synchronization "+d(l.map.get(s).status)+". Block "+d(l.map.get(s).height)+" seen "+d(l.map.get(s).last_seen)+".",9,j)]))),128))])]),_:1})])}var z=h(D,[["render",V],["__scopeId","data-v-18750a6e"]]);const A={mounted(){document.title="Settings - Pea"}};function F(e,t,r,f,l,a){const i=z;return c(),b(i)}var P=h(A,[["render",F]]);export{P as default};
