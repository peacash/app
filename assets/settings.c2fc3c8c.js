import{_ as h,c as v}from"./index.1f57bf90.js";import{o,c as p,g as m,w as g,b as a,n as _,i as y,v as x,F as S,d as w,t as d,j as I,p as b,a as k,e as N}from"./vendor.c2e542a0.js";const D={data(){return{url_input:"",url:"",urls:[],map:new Map}},methods:{add(e){e.preventDefault();let t=this.url_input;if(!t||this.urls.includes(t)){this.$refs.url_input.focus();return}this.url=t,this.urls.unshift(t),localStorage.setItem("url",t),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url_input=""},remove(e){let t=this.urls[e];this.urls.splice(e,1),localStorage.setItem("urls",JSON.stringify(this.urls)),this.url==t&&(this.url=null,localStorage.removeItem("url"))},select(e){let t=this.urls[e];localStorage.setItem("url",t),this.url=t},select_enter(e,t){e.key=="Enter"&&this.select(t)},update(e,t){if(!e.target.value){this.remove(t),this.$refs.url_input.focus();return}this.urls[t]=e.target.value,localStorage.setItem("urls",JSON.stringify(this.urls))},loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},1e3)},fetchData(){let e=JSON.parse(window.localStorage.getItem("urls"));if(!!e?.length)for(let t of e)this.map.has(t)||this.map.set(t,null),fetch(t+"/sync").then(r=>r.json()).then(r=>{this.map.set(t,r)}).catch(r=>{this.map.set(t,r.toString())})}},mounted(){this.url=localStorage.getItem("url");let e=JSON.parse(localStorage.getItem("urls"));e?.length&&(this.urls=e),this.loop()},unmounted(){clearInterval(this.interval)}},C=e=>(b("data-v-5b139039"),e=e(),k(),e),B={class:"flex flex-col gap-2 md:gap-10 my-2 md:my-10 w-full"},J=["value"],O=C(()=>a("input",{type:"submit",value:"Add",class:"text-black rounded text-sm md:text-lg w-24 sm:w-32 md:w-40 ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 cursor-pointer"},null,-1)),j={class:"flex flex-col gap-2 sm:gap-2 md:gap-10"},E=["onClick","onKeydown","onInput","value","name"],V=["for"];function z(e,t,r,f,s,n){const i=v;return o(),p("div",B,[m(i,null,{default:g(()=>[a("input",{value:s.url?s.url:"Configure an API endpoint to use.",disabled:"",class:_(["text-black rounded mx-auto w-full flex ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 text-center",s.map.get(s.url)?.status?"green":"red"]),style:{"font-weight":"600","max-width":"20rem"},type:"text",placeholder:"http://0.0.0.0:9332"},null,10,J)]),_:1}),m(i,null,{default:g(()=>[a("form",{onSubmit:t[1]||(t[1]=(...l)=>n.add&&n.add(...l)),class:"flex gap-2 md:gap-2 md:gap-10"},[y(a("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.url_input=l),ref:"url_input",class:"text-black rounded ring-1 ring-black ring-opacity-10 sm:ring-opacity-20 w-full",type:"text",placeholder:"http://0.0.0.0:9332"},null,512),[[x,s.url_input]]),O],32)]),_:1}),m(i,null,{default:g(()=>[a("div",j,[(o(!0),p(S,null,w(s.urls,(l,u)=>(o(),p("div",{key:u},[a("input",{onClick:c=>n.select(u),onKeydown:c=>n.select_enter(c,u),onInput:c=>n.update(c,u),value:l,name:l,class:_(["text-black rounded w-full ring-1 ring-black ring-opacity-10 sm:ring-opacity-20",(s.map.get(l)?.status?"green":"red")+" "+(l===s.url?"blue ring-opacity-50 sm:ring-opacity-60":"")]),type:"text"},null,42,E),s.map.get(l)?.status?(o(),p("label",{key:0,for:l,class:"text-xs lg:text-sm h-1 lg:h-2 ml-1"},"Synchronization "+d(s.map.get(l).status)+". Block "+d(s.map.get(l).height)+" seen "+d(s.map.get(l).last_seen)+".",9,V)):I("",!0)]))),128))])]),_:1})])}var A=h(D,[["render",z],["__scopeId","data-v-5b139039"]]);const F={mounted(){document.title="Settings - Pea"}};function K(e,t,r,f,s,n){const i=A;return o(),N(i)}var L=h(F,[["render",K]]);export{L as default};
