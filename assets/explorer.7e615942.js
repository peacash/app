import{_ as g,c as B}from"./index.5132b44e.js";import{o,c as h,b as v,t as c,m as i,F as w,f as s,r as C,g as n,w as e,e as _,d as T}from"./vendor.eebf0573.js";import{_ as I,a as N,b as S,c as V}from"./Table.720041a8.js";const z={props:{endpoint:String},data(){return{https:window.location.protocol==="https:",host:window.location.host}}},E={class:"text-center"},F=s("Endpoint "),L=s(" seems unresponsive."),P={key:0,class:"text-center"},U=s(" Try the "),H=["href"],R=s(" of this website. ");function q(u,l,b,j,t,x){return o(),h(w,null,[v("div",E,[F,v("i",null,c(b.endpoint),1),L]),t.https?(o(),h("div",P,[U,v("a",{href:"http://"+t.host},"http version",8,H),R])):i("",!0)],64)}var A=g(z,[["render",q]]);const G={data(){return{dynamic:null,trusted:null,sync:null,info:null,interval:null,timeout:!1,https:window.location.protocol==="https:",host:window.location.host,endpoint:null,shorten_public_key:!0}},mounted(){document.title="Explorer - Pea",this.loop(),setTimeout(()=>{this.timeout=!0},1e3)},unmounted(){clearInterval(this.interval)},methods:{loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},3e3)},shorten(u){return u.slice(0,12)+"..."+u.slice(-8)},fetchData(){let u=window.localStorage.getItem("endpoint");!u||(fetch(u+"/dynamic").then(l=>l.json()).then(l=>{this.dynamic=l}),fetch(u+"/trusted").then(l=>l.json()).then(l=>{this.trusted=l}),fetch(u+"/sync").then(l=>l.json()).then(l=>{this.sync=l}),fetch(u+"/info").then(l=>l.json()).then(l=>{this.info=l}))}}},J={class:"flex flex-col gap-10 my-10 w-full"},K={key:0,class:"flex flex-col justify-center mx-auto my-4"},M=s("Synchronization"),O=s("Last\xA0block\xA0seen"),Q=s("Height"),W=s("Tree\xA0size"),X=s("Public\xA0key"),Y=s("Time"),Z=s("Uptime"),$=s("Tick");function ee(u,l,b,j,t,x){const D=A,f=I,r=N,d=S,y=C("router-link"),m=V,k=B;return o(),h("div",J,[n(k,null,{default:e(()=>[!t.sync&&!t.info&&!t.dynamic&&!t.trusted&&t.timeout?(o(),h("div",K,[n(D,{endpoint:t.endpoint},null,8,["endpoint"])])):i("",!0),t.sync&&t.info?(o(),_(m,{key:1},{default:e(()=>[t.sync?(o(),_(d,{key:0},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[M]),_:1}),n(r,null,{default:e(()=>[s(c(t.sync.sync),1)]),_:1})]),_:1})):i("",!0),t.sync?(o(),_(d,{key:1},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[O]),_:1}),n(r,null,{default:e(()=>[s(c(t.sync.last),1)]),_:1})]),_:1})):i("",!0),t.sync?(o(),_(d,{key:2},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[Q]),_:1}),n(r,null,{default:e(()=>[s(c(t.sync.height),1)]),_:1})]),_:1})):i("",!0),t.info?(o(),_(d,{key:3},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[W]),_:1}),n(r,null,{default:e(()=>[s(c(t.info.tree_size),1)]),_:1})]),_:1})):i("",!0),t.info?(o(),_(d,{key:4},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[X]),_:1}),t.shorten_public_key?(o(),_(r,{key:0,onClick:l[0]||(l[0]=a=>t.shorten_public_key=!1)},{default:e(()=>[s(c(x.shorten(t.info.public_key)),1)]),_:1})):(o(),_(r,{key:1},{default:e(()=>[n(y,{class:"link",to:"/address/"+t.info.public_key},{default:e(()=>[s(c(t.info.public_key),1)]),_:1},8,["to"])]),_:1}))]),_:1})):i("",!0),t.info?(o(),_(d,{key:5},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[Y]),_:1}),n(r,null,{default:e(()=>[s(c(t.info.time),1)]),_:1})]),_:1})):i("",!0),t.info?(o(),_(d,{key:6},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[Z]),_:1}),n(r,null,{default:e(()=>[s(c(t.info.uptime),1)]),_:1})]),_:1})):i("",!0),t.info?(o(),_(d,{key:7},{default:e(()=>[n(f,{class:"w-60"},{default:e(()=>[$]),_:1}),n(r,null,{default:e(()=>[s(c(t.info.lag)+" ms",1)]),_:1})]),_:1})):i("",!0)]),_:1})):i("",!0)]),_:1}),n(k,null,{default:e(()=>[t.dynamic?(o(),_(m,{key:0},{default:e(()=>[(o(!0),h(w,null,T(t.dynamic.stakers,(a,p)=>(o(),_(d,{key:(u.hash,p)},{default:e(()=>[n(f,null,{default:e(()=>[s("#"+c(p),1)]),_:2},1024),n(r,{class:"justify-center"},{default:e(()=>[n(y,{class:"link",to:"/address/"+a},{default:e(()=>[s(c(a),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):i("",!0)]),_:1}),n(k,null,{default:e(()=>[t.dynamic&&t.trusted&&t.sync?(o(),_(m,{key:0},{default:e(()=>[(o(!0),h(w,null,T([...t.dynamic.latest_hashes,...t.trusted.latest_hashes].concat(),(a,p)=>(o(),_(d,{key:p},{default:e(()=>[n(f,null,{default:e(()=>[s("#"+c(t.sync.height-p),1)]),_:2},1024),n(r,{class:"justify-center"},{default:e(()=>[n(y,{class:"link",to:"/block/"+a},{default:e(()=>[s(c(a),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):i("",!0)]),_:1})])}var oe=g(G,[["render",ee],["__scopeId","data-v-0c756649"]]);export{oe as default};
