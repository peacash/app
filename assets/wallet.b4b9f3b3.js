import{_ as w}from"./Address.9bac8637.js";import{u as m,_ as h}from"./util.b41c47da.js";import{_ as b,a as y}from"./index.c40cdcfa.js";import{o as l,c as v,e as p,j as _,b as o,g as c,w as n,F as g,i,v as a,f as d,t as V}from"./vendor.be94e15b.js";const S={data(){return{view:"receive",secret:null,public:null,transaction:"",transaction_output:this.$route.query.output,transaction_amount:this.$route.query.amount,transaction_fee:this.$route.query.fee,stake:"",stake_deposit:!0,stake_amount:"",stake_fee:""}},mounted(){document.title="Wallet - Pea",(this.transaction_output||this.transaction_amount||this.transaction_fee)&&(this.view="transaction"),this.load()},methods:{load(){this.secret=window.localStorage.getItem("secret"),this.secret==null&&(this.secret=m.generate_secret(),window.localStorage.setItem("secret",this.secret)),this.public=m.public(this.secret)},remove(){window.localStorage.removeItem("secret"),this.load()},transaction_sign(){this.transaction=m.transaction(this.transaction_output,this.transaction_amount,this.transaction_fee,this.secret)},stake_sign(){this.stake=m.stake(this.stake_deposit,this.stake_amount,this.stake_fee,this.secret),this.stake_confirm=!0},transaction_send(){this.transaction_sign(),fetch(window.localStorage.getItem("api")+"/transaction",{method:"POST",body:this.transaction}).then(r=>r.json()).then(r=>{this.transaction=r})},stake_send(){this.stake_sign(),this.stake_confirm=!1,fetch(window.localStorage.getItem("api")+"/stake",{method:"POST",body:this.stake}).then(r=>r.json()).then(r=>{this.stake=r})}}},C={class:"flex flex-col gap-2 my-2 w-full"},j={class:"flex gap-2 justify-center"},U=d("Receive"),I=d("Transaction"),B=d("Stake"),T=d("Secret"),D={class:"flex flex-col gap-2 mx-auto"},N={class:"flex flex-col gap-2 mx-auto"},q=d("Send"),P={class:"flex flex-col gap-2 mx-auto"},A={class:"flex justify-center gap-2"},F=d("Send"),O={class:"flex flex-col gap-2"},R=d("Remove");function W(r,t,E,M,e,k){const x=w,u=h,f=y;return l(),v(g,null,[e.public?(l(),p(x,{key:0,address:e.public},null,8,["address"])):_("",!0),o("div",C,[c(f,null,{default:n(()=>[o("div",j,[c(u,{onClick:t[0]||(t[0]=s=>e.view="receive")},{default:n(()=>[U]),_:1}),c(u,{onClick:t[1]||(t[1]=s=>e.view="transaction")},{default:n(()=>[I]),_:1}),c(u,{onClick:t[2]||(t[2]=s=>e.view="stake")},{default:n(()=>[B]),_:1}),c(u,{onClick:t[3]||(t[3]=s=>e.view="secret")},{default:n(()=>[T]),_:1})])]),_:1}),e.view=="receive"&&e.public?(l(),p(f,{key:0},{default:n(()=>[o("div",D,[i(o("input",{disabled:"","onUpdate:modelValue":t[4]||(t[4]=s=>e.public=s),type:"text",class:"public text-black rounded w-full"},null,512),[[a,e.public]])])]),_:1})):_("",!0),e.view=="transaction"&&e.secret?(l(),p(f,{key:1},{default:n(()=>[o("div",N,[i(o("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>e.transaction_output=s),type:"text",placeholder:"output address",class:"text-black rounded w-full"},null,512),[[a,e.transaction_output]]),i(o("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>e.transaction_amount=s),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[a,e.transaction_amount]]),i(o("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>e.transaction_fee=s),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[a,e.transaction_fee]]),c(u,{onClick:t[8]||(t[8]=s=>k.transaction_send()),class:"mx-auto"},{default:n(()=>[q]),_:1}),e.transaction?i((l(),v("textarea",{key:0,disabled:"","onUpdate:modelValue":t[9]||(t[9]=s=>e.transaction=s),rows:"2",class:"text-black rounded w-full"},null,512)),[[a,e.transaction]]):_("",!0)])]),_:1})):_("",!0),e.view=="stake"&&e.secret?(l(),p(f,{key:2},{default:n(()=>[o("div",P,[i(o("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>e.stake_amount=s),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[a,e.stake_amount]]),i(o("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>e.stake_fee=s),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[a,e.stake_fee]]),o("div",A,[c(u,{onClick:t[12]||(t[12]=s=>e.stake_deposit=!e.stake_deposit)},{default:n(()=>[d(V(e.stake_deposit?"Deposit":"Withdraw"),1)]),_:1}),c(u,{onClick:t[13]||(t[13]=s=>k.stake_send())},{default:n(()=>[F]),_:1})]),e.stake?i((l(),v("textarea",{key:0,disabled:"","onUpdate:modelValue":t[14]||(t[14]=s=>e.stake=s),rows:"2",class:"text-black rounded w-full"},null,512)),[[a,e.stake]]):_("",!0)])]),_:1})):e.view=="secret"&&e.secret?(l(),p(f,{key:3},{default:n(()=>[o("div",O,[i(o("input",{disabled:"","onUpdate:modelValue":t[15]||(t[15]=s=>e.secret=s),type:"text",class:"secret text-black rounded w-full"},null,512),[[a,e.secret]]),e.secret?(l(),p(u,{key:0,class:"mx-auto",onClick:t[16]||(t[16]=s=>k.remove())},{default:n(()=>[R]),_:1})):_("",!0)])]),_:1})):_("",!0)])],64)}var K=b(S,[["render",W],["__scopeId","data-v-96025f94"]]);export{K as default};
