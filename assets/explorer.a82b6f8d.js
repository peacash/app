import{_ as j,c as B}from"./index.e3049309.js";import{o as l,c as h,b as v,t as i,m as u,F as w,f as n,r as I,g as s,w as e,e as _,d as g}from"./vendor.eebf0573.js";import{_ as N,a as S,b as C,c as V}from"./Table.a5692b3f.js";const z={props:{api:String},data(){return{https:window.location.protocol==="https:",host:window.location.host}}},L={class:"text-center"},P=n("API endpoint "),E=n(" seems unresponsive."),F={key:0,class:"text-center"},U=n(" Try the "),A=["href"],G=n(" of this website. ");function H(o,p,x,T,t,b){return l(),h(w,null,[v("div",L,[P,v("i",null,i(x.api),1),E]),t.https?(l(),h("div",F,[U,v("a",{href:"http://"+t.host},"http version",8,A),G])):u("",!0)],64)}var Q=j(z,[["render",H]]);const R={data(){return{dynamic:null,trusted:null,sync:null,info:null,interval:null,timeout:!1,https:window.location.protocol==="https:",host:window.location.host,api:null,shorten_public_key:!0}},mounted(){document.title="Explorer - Pea",this.loop(),setTimeout(()=>{this.timeout=!0},1e3)},unmounted(){clearInterval(this.interval)},methods:{loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},3e3)},shorten(o){return o.slice(0,12)+"..."+o.slice(-8)},fetchData(){this.api=window.localStorage.getItem("api"),fetch(this.api+"/dynamic").then(o=>o.json()).then(o=>{this.dynamic=o}),fetch(this.api+"/trusted").then(o=>o.json()).then(o=>{this.trusted=o}),fetch(this.api+"/sync").then(o=>o.json()).then(o=>{this.sync=o}),fetch(this.api+"/info").then(o=>o.json()).then(o=>{this.info=o})}}},q={class:"flex flex-col gap-2 my-2 w-full"},J={key:0,class:"flex flex-col justify-center mx-auto my-4"},K=n("General information about Node"),M=n("Synchronization"),O=n("Last\xA0block\xA0seen"),W=n("Height"),X=n("Tree\xA0size"),Y=n("Public\xA0key"),Z=n("Time"),$=n("Uptime"),ee=n("Tick"),te=n("Stakers Queue"),se=n("Latest Blocks");function ne(o,p,x,T,t,b){const D=Q,c=N,a=S,r=C,y=I("router-link"),m=V,k=B;return l(),h("div",q,[s(k,null,{default:e(()=>[!t.sync&&!t.info&&!t.dynamic&&!t.trusted&&t.timeout?(l(),h("div",J,[s(D,{api:t.api},null,8,["api"])])):u("",!0),t.sync&&t.info?(l(),_(m,{key:1},{default:e(()=>[s(c,{class:"text-xl justify-center pb-2"},{default:e(()=>[K]),_:1}),t.sync?(l(),_(c,{key:0},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[M]),_:1}),s(r,null,{default:e(()=>[n(i(t.sync.sync),1)]),_:1})]),_:1})):u("",!0),t.sync?(l(),_(c,{key:1},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[O]),_:1}),s(r,null,{default:e(()=>[n(i(t.sync.last),1)]),_:1})]),_:1})):u("",!0),t.sync?(l(),_(c,{key:2},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[W]),_:1}),s(r,null,{default:e(()=>[n(i(t.sync.height),1)]),_:1})]),_:1})):u("",!0),t.info?(l(),_(c,{key:3},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[X]),_:1}),s(r,null,{default:e(()=>[n(i(t.info.tree_size),1)]),_:1})]),_:1})):u("",!0),t.info?(l(),_(c,{key:4},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[Y]),_:1}),t.shorten_public_key?(l(),_(r,{key:0,onClick:p[0]||(p[0]=f=>t.shorten_public_key=!1)},{default:e(()=>[n(i(b.shorten(t.info.public_key)),1)]),_:1})):(l(),_(r,{key:1},{default:e(()=>[s(y,{class:"link",to:"/address/"+t.info.public_key},{default:e(()=>[n(i(t.info.public_key),1)]),_:1},8,["to"])]),_:1}))]),_:1})):u("",!0),t.info?(l(),_(c,{key:5},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[Z]),_:1}),s(r,null,{default:e(()=>[n(i(t.info.time),1)]),_:1})]),_:1})):u("",!0),t.info?(l(),_(c,{key:6},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[$]),_:1}),s(r,null,{default:e(()=>[n(i(t.info.uptime),1)]),_:1})]),_:1})):u("",!0),t.info?(l(),_(c,{key:7},{default:e(()=>[s(a,{class:"w-60"},{default:e(()=>[ee]),_:1}),s(r,null,{default:e(()=>[n(i(t.info.lag)+" ms",1)]),_:1})]),_:1})):u("",!0)]),_:1})):u("",!0)]),_:1}),s(k,null,{default:e(()=>[t.dynamic?(l(),_(m,{key:0},{default:e(()=>[s(c,{class:"text-xl justify-center pb-2"},{default:e(()=>[te]),_:1}),(l(!0),h(w,null,g(t.dynamic.stakers,(f,d)=>(l(),_(c,{key:(o.hash,d)},{default:e(()=>[s(a,null,{default:e(()=>[n("#"+i(d),1)]),_:2},1024),s(r,{class:"justify-center"},{default:e(()=>[s(y,{class:"link",to:"/address/"+f},{default:e(()=>[n(i(f),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):u("",!0)]),_:1}),s(k,null,{default:e(()=>[t.dynamic&&t.trusted&&t.sync?(l(),_(m,{key:0},{default:e(()=>[s(c,{class:"text-xl justify-center pb-2"},{default:e(()=>[se]),_:1}),(l(!0),h(w,null,g([...t.dynamic.latest_hashes,...t.trusted.latest_hashes].concat(),(f,d)=>(l(),_(c,{key:d},{default:e(()=>[s(a,null,{default:e(()=>[n("#"+i(t.sync.height-d),1)]),_:2},1024),s(r,{class:"justify-center"},{default:e(()=>[s(y,{class:"link",to:"/block/"+f},{default:e(()=>[n(i(f),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):u("",!0)]),_:1})])}var ie=j(R,[["render",ne],["__scopeId","data-v-693a38d2"]]);export{ie as default};
