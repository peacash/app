import{_ as D}from"./Address.9bac8637.js";import{u as x,_ as B}from"./util.b41c47da.js";import{_ as w,a as C,i as N,b as P,c as E,d as W,e as q}from"./index.c40cdcfa.js";import{o as u,c as h,b as d,e as r,j as c,g as n,w as t,i as p,v as m,f as i,t as f,r as z,F as I,d as U,h as L}from"./vendor.be94e15b.js";const R={data(){return{view:"receive",secret:null,public:null,transaction:"",transaction_output:this.$route.query.output,transaction_amount:this.$route.query.amount,transaction_fee:this.$route.query.fee,stake:"",stake_deposit:!0,stake_amount:"",stake_fee:""}},mounted(){document.title="Wallet - Pea",(this.transaction_output||this.transaction_amount||this.transaction_fee)&&(this.view="transaction"),this.load()},methods:{load(){this.secret=window.localStorage.getItem("secret"),this.secret==null&&(this.secret=x.generate_secret(),window.localStorage.setItem("secret",this.secret)),this.public=x.public(this.secret)},remove(){window.localStorage.removeItem("secret"),this.load()},transaction_sign(){this.transaction=x.transaction(this.transaction_output,this.transaction_amount,this.transaction_fee,this.secret)},stake_sign(){this.stake=x.stake(this.stake_deposit,this.stake_amount,this.stake_fee,this.secret),this.stake_confirm=!0},transaction_send(){this.transaction_sign(),fetch(window.localStorage.getItem("api")+"/transaction",{method:"POST",body:this.transaction}).then(l=>l.json()).then(l=>{this.transaction=l})},stake_send(){this.stake_sign(),this.stake_confirm=!1,fetch(window.localStorage.getItem("api")+"/stake",{method:"POST",body:this.stake}).then(l=>l.json()).then(l=>{this.stake=l})}}},A={style:{"scroll-snap-align":"start","min-width":"100vw"}},F={class:"flex flex-col gap-2 my-2"},O={class:"flex gap-2 justify-center"},X=i("Receive"),G=i("Transaction"),H=i("Stake"),M=i("Secret"),Q={class:"flex flex-col gap-2 mx-auto"},J={class:"flex flex-col gap-2 mx-auto"},K=i("Send"),Y={class:"flex flex-col gap-2 mx-auto"},Z={class:"flex justify-center gap-2"},$=i("Send"),ee={class:"flex flex-col gap-2"},te=i("Remove");function se(l,s,b,g,e,y){const j=D,_=B,a=C;return u(),h("div",A,[d("div",F,[e.public?(u(),r(j,{key:0,address:e.public},null,8,["address"])):c("",!0),n(a,null,{default:t(()=>[d("div",O,[n(_,{onClick:s[0]||(s[0]=o=>e.view="receive")},{default:t(()=>[X]),_:1}),n(_,{onClick:s[1]||(s[1]=o=>e.view="transaction")},{default:t(()=>[G]),_:1}),n(_,{onClick:s[2]||(s[2]=o=>e.view="stake")},{default:t(()=>[H]),_:1}),n(_,{onClick:s[3]||(s[3]=o=>e.view="secret")},{default:t(()=>[M]),_:1})])]),_:1}),e.view=="receive"&&e.public?(u(),r(a,{key:1},{default:t(()=>[d("div",Q,[p(d("input",{disabled:"","onUpdate:modelValue":s[4]||(s[4]=o=>e.public=o),type:"text",class:"public text-black rounded w-full"},null,512),[[m,e.public]])])]),_:1})):c("",!0),e.view=="transaction"&&e.secret?(u(),r(a,{key:2},{default:t(()=>[d("div",J,[p(d("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>e.transaction_output=o),type:"text",placeholder:"output address",class:"text-black rounded w-full"},null,512),[[m,e.transaction_output]]),p(d("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>e.transaction_amount=o),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[m,e.transaction_amount]]),p(d("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>e.transaction_fee=o),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[m,e.transaction_fee]]),n(_,{onClick:s[8]||(s[8]=o=>y.transaction_send()),class:"mx-auto"},{default:t(()=>[K]),_:1}),e.transaction?p((u(),h("textarea",{key:0,disabled:"","onUpdate:modelValue":s[9]||(s[9]=o=>e.transaction=o),rows:"2",class:"text-black rounded w-full"},null,512)),[[m,e.transaction]]):c("",!0)])]),_:1})):c("",!0),e.view=="stake"&&e.secret?(u(),r(a,{key:3},{default:t(()=>[d("div",Y,[p(d("input",{"onUpdate:modelValue":s[10]||(s[10]=o=>e.stake_amount=o),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[m,e.stake_amount]]),p(d("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>e.stake_fee=o),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[m,e.stake_fee]]),d("div",Z,[n(_,{onClick:s[12]||(s[12]=o=>e.stake_deposit=!e.stake_deposit)},{default:t(()=>[i(f(e.stake_deposit?"Deposit":"Withdraw"),1)]),_:1}),n(_,{onClick:s[13]||(s[13]=o=>y.stake_send())},{default:t(()=>[$]),_:1})]),e.stake?p((u(),h("textarea",{key:0,disabled:"","onUpdate:modelValue":s[14]||(s[14]=o=>e.stake=o),rows:"2",class:"text-black rounded w-full"},null,512)),[[m,e.stake]]):c("",!0)])]),_:1})):e.view=="secret"&&e.secret?(u(),r(a,{key:4},{default:t(()=>[d("div",ee,[p(d("input",{disabled:"","onUpdate:modelValue":s[15]||(s[15]=o=>e.secret=o),type:"text",class:"secret text-black rounded w-full"},null,512),[[m,e.secret]]),e.secret?(u(),r(_,{key:0,class:"mx-auto",onClick:s[16]||(s[16]=o=>y.remove())},{default:t(()=>[te]),_:1})):c("",!0)])]),_:1})):c("",!0)])])}var ne=w(R,[["render",se],["__scopeId","data-v-2c8f5986"]]);const oe={data(){return{dynamic:null,trusted:null,sync:null,info:null,interval:null,timeout:!1,https:window.location.protocol==="https:",host:window.location.host,api:null,shorten_public_key:!0}},mounted(){document.title="Explorer - Pea",this.loop(),setTimeout(()=>{this.timeout=!0},1e3)},unmounted(){clearInterval(this.interval)},methods:{loop(){this.fetchData(),this.interval=setInterval(()=>{this.fetchData()},3e3)},shorten(l){return l.slice(0,12)+"..."+l.slice(-8)},fetchData(){this.api=window.localStorage.getItem("api"),fetch(this.api+"/dynamic").then(l=>l.json()).then(l=>{this.dynamic=l}),fetch(this.api+"/trusted").then(l=>l.json()).then(l=>{this.trusted=l}),fetch(this.api+"/sync").then(l=>l.json()).then(l=>{this.sync=l}),fetch(this.api+"/info").then(l=>l.json()).then(l=>{this.info=l})}}},le={class:"flex flex-col gap-2 my-2",style:{"scroll-snap-align":"start","min-width":"100vw","overflow-y":"auto"}},ie={key:0,class:"flex flex-col justify-center mx-auto my-4"},ue=i("General information about Node"),_e=i("Synchronization"),re=i("Last\xA0block\xA0seen"),ce=i("Height"),ae=i("Tree\xA0size"),de=i("Public\xA0key"),fe=i("Time"),pe=i("Uptime"),me=i("Tick"),he=i("Stakers Queue"),ke=i("Latest Blocks");function ye(l,s,b,g,e,y){const j=N,_=P,a=E,o=W,S=z("router-link"),T=q,V=C;return u(),h("div",le,[n(V,null,{default:t(()=>[!e.sync&&!e.info&&!e.dynamic&&!e.trusted&&e.timeout?(u(),h("div",ie,[n(j,{api:e.api},null,8,["api"])])):c("",!0),e.sync&&e.info?(u(),r(T,{key:1,bar:!0},{default:t(()=>[n(_,{class:"text-xl justify-center pb-2"},{default:t(()=>[ue]),_:1}),e.sync?(u(),r(_,{key:0},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[_e]),_:1}),n(o,null,{default:t(()=>[i(f(e.sync.sync),1)]),_:1})]),_:1})):c("",!0),e.sync?(u(),r(_,{key:1},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[re]),_:1}),n(o,null,{default:t(()=>[i(f(e.sync.last),1)]),_:1})]),_:1})):c("",!0),e.sync?(u(),r(_,{key:2},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[ce]),_:1}),n(o,null,{default:t(()=>[i(f(e.sync.height),1)]),_:1})]),_:1})):c("",!0),e.info?(u(),r(_,{key:3},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[ae]),_:1}),n(o,null,{default:t(()=>[i(f(e.info.tree_size),1)]),_:1})]),_:1})):c("",!0),e.info?(u(),r(_,{key:4},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[de]),_:1}),e.shorten_public_key?(u(),r(o,{key:0,onClick:s[0]||(s[0]=k=>e.shorten_public_key=!1)},{default:t(()=>[i(f(y.shorten(e.info.public_key)),1)]),_:1})):(u(),r(o,{key:1},{default:t(()=>[n(S,{class:"link",to:"/address/"+e.info.public_key},{default:t(()=>[i(f(e.info.public_key),1)]),_:1},8,["to"])]),_:1}))]),_:1})):c("",!0),e.info?(u(),r(_,{key:5},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[fe]),_:1}),n(o,null,{default:t(()=>[i(f(e.info.time),1)]),_:1})]),_:1})):c("",!0),e.info?(u(),r(_,{key:6},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[pe]),_:1}),n(o,null,{default:t(()=>[i(f(e.info.uptime),1)]),_:1})]),_:1})):c("",!0),e.info?(u(),r(_,{key:7},{default:t(()=>[n(a,{class:"w-60"},{default:t(()=>[me]),_:1}),n(o,null,{default:t(()=>[i(f(e.info.lag)+" ms",1)]),_:1})]),_:1})):c("",!0)]),_:1})):c("",!0)]),_:1}),n(V,null,{default:t(()=>[e.dynamic?(u(),r(T,{key:0,bar:!0},{default:t(()=>[n(_,{class:"text-xl justify-center pb-2"},{default:t(()=>[he]),_:1}),(u(!0),h(I,null,U(e.dynamic.stakers,(k,v)=>(u(),r(_,{key:(l.hash,v)},{default:t(()=>[n(a,null,{default:t(()=>[i("#"+f(v),1)]),_:2},1024),n(o,{class:"justify-center"},{default:t(()=>[n(S,{class:"link",to:"/address/"+k},{default:t(()=>[i(f(k),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):c("",!0)]),_:1}),n(V,null,{default:t(()=>[e.dynamic&&e.trusted&&e.sync?(u(),r(T,{key:0,bar:!0},{default:t(()=>[n(_,{class:"text-xl justify-center pb-2"},{default:t(()=>[ke]),_:1}),(u(!0),h(I,null,U([...e.dynamic.latest_hashes,...e.trusted.latest_hashes].concat(),(k,v)=>(u(),r(_,{key:v},{default:t(()=>[n(a,null,{default:t(()=>[i("#"+f(e.sync.height-v),1)]),_:2},1024),n(o,{class:"justify-center"},{default:t(()=>[n(S,{class:"link",to:"/block/"+k},{default:t(()=>[i(f(k),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):c("",!0)]),_:1})])}var ve=w(oe,[["render",ye],["__scopeId","data-v-51c43511"]]);const xe={},we={class:"flex"};function be(l,s){return u(),h("div",we,[L(l.$slots,"default",{},void 0,!0)])}var ge=w(xe,[["render",be],["__scopeId","data-v-67b039c9"]]);const je={};function Se(l,s){const b=ne,g=ve,e=ge;return u(),r(e,null,{default:t(()=>[n(b),n(g)]),_:1})}var Ue=w(je,[["render",Se]]);export{Ue as default};
