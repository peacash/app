import{_ as y}from"./Address.a229651d.js";import{_ as h,s as g,a as V,t as S,b as C,c as U}from"./index.63fa8cab.js";import{o as i,c as v,g as j,d as p,i as _,a as o,f as c,w as l,F as I,h as a,v as r,e as d,t as B}from"./vendor.783e6b8a.js";const T={},D={role:"button"};function N(n,e){return i(),v("button",D,[j(n.$slots,"default",{},void 0,!0)])}var q=h(T,[["render",N],["__scopeId","data-v-0290eb9c"]]),x={generate_secret:()=>{const n=new Uint8Array(32);return crypto.getRandomValues(n),g(n)},public:n=>V(n),transaction:(n,e,m,k)=>S(n,e,m,k),stake:(n,e,m,k)=>C(n,e,m,k)};const A={data(){return{view:"receive",secret:null,public:null,transaction:"",transaction_output:this.$route.query.output,transaction_amount:this.$route.query.amount,transaction_fee:this.$route.query.fee,stake:"",stake_deposit:!0,stake_amount:"",stake_fee:""}},mounted(){document.title="Wallet - Pea",(this.transaction_output||this.transaction_amount||this.transaction_fee)&&(this.view="transaction"),this.load()},methods:{load(){this.secret=window.localStorage.getItem("secret"),this.secret==null&&(this.secret=x.generate_secret(),window.localStorage.setItem("secret",this.secret)),this.public=x.public(this.secret)},remove(){window.localStorage.removeItem("secret"),this.load()},transaction_sign(){this.transaction=x.transaction(this.transaction_output,this.transaction_amount,this.transaction_fee,this.secret)},stake_sign(){this.stake=x.stake(this.stake_deposit,this.stake_amount,this.stake_fee,this.secret),this.stake_confirm=!0},transaction_send(){this.transaction_sign(),fetch(window.localStorage.getItem("api")+"/transaction",{method:"POST",body:this.transaction}).then(n=>n.json()).then(n=>{this.transaction=n})},stake_send(){this.stake_sign(),this.stake_confirm=!1,fetch(window.localStorage.getItem("api")+"/stake",{method:"POST",body:this.stake}).then(n=>n.json()).then(n=>{this.stake=n})}}},P={class:"flex flex-col gap-2 my-2 w-full"},R={class:"flex gap-2 justify-center"},F=d("Receive"),O=d("Transaction"),W=d("Stake"),E=d("Secret"),M={class:"flex flex-col gap-2 mx-auto"},z={class:"flex flex-col gap-2 mx-auto"},G=d("Send"),H={class:"flex flex-col gap-2 mx-auto"},J={class:"flex justify-center gap-2"},K=d("Send"),L={class:"flex flex-col gap-2"},Q=d("Remove");function X(n,e,m,k,t,w){const b=y,u=q,f=U;return i(),v(I,null,[t.public?(i(),p(b,{key:0,address:t.public},null,8,["address"])):_("",!0),o("div",P,[c(f,null,{default:l(()=>[o("div",R,[c(u,{onClick:e[0]||(e[0]=s=>t.view="receive")},{default:l(()=>[F]),_:1}),c(u,{onClick:e[1]||(e[1]=s=>t.view="transaction")},{default:l(()=>[O]),_:1}),c(u,{onClick:e[2]||(e[2]=s=>t.view="stake")},{default:l(()=>[W]),_:1}),c(u,{onClick:e[3]||(e[3]=s=>t.view="secret")},{default:l(()=>[E]),_:1})])]),_:1}),t.view=="receive"&&t.public?(i(),p(f,{key:0},{default:l(()=>[o("div",M,[a(o("input",{disabled:"","onUpdate:modelValue":e[4]||(e[4]=s=>t.public=s),type:"text",class:"public text-black rounded w-full"},null,512),[[r,t.public]])])]),_:1})):_("",!0),t.view=="transaction"&&t.secret?(i(),p(f,{key:1},{default:l(()=>[o("div",z,[a(o("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>t.transaction_output=s),type:"text",placeholder:"output address",class:"text-black rounded w-full"},null,512),[[r,t.transaction_output]]),a(o("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.transaction_amount=s),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[r,t.transaction_amount]]),a(o("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.transaction_fee=s),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[r,t.transaction_fee]]),c(u,{onClick:e[8]||(e[8]=s=>w.transaction_send()),class:"mx-auto"},{default:l(()=>[G]),_:1}),t.transaction?a((i(),v("textarea",{key:0,disabled:"","onUpdate:modelValue":e[9]||(e[9]=s=>t.transaction=s),rows:"2",class:"text-black rounded w-full"},null,512)),[[r,t.transaction]]):_("",!0)])]),_:1})):_("",!0),t.view=="stake"&&t.secret?(i(),p(f,{key:2},{default:l(()=>[o("div",H,[a(o("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>t.stake_amount=s),type:"text",placeholder:"amount",class:"text-black rounded w-full"},null,512),[[r,t.stake_amount]]),a(o("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>t.stake_fee=s),type:"text",placeholder:"fee",class:"text-black rounded w-full"},null,512),[[r,t.stake_fee]]),o("div",J,[c(u,{onClick:e[12]||(e[12]=s=>t.stake_deposit=!t.stake_deposit)},{default:l(()=>[d(B(t.stake_deposit?"Deposit":"Withdraw"),1)]),_:1}),c(u,{onClick:e[13]||(e[13]=s=>w.stake_send())},{default:l(()=>[K]),_:1})]),t.stake?a((i(),v("textarea",{key:0,disabled:"","onUpdate:modelValue":e[14]||(e[14]=s=>t.stake=s),rows:"2",class:"text-black rounded w-full"},null,512)),[[r,t.stake]]):_("",!0)])]),_:1})):t.view=="secret"&&t.secret?(i(),p(f,{key:3},{default:l(()=>[o("div",L,[a(o("input",{disabled:"","onUpdate:modelValue":e[15]||(e[15]=s=>t.secret=s),type:"text",class:"secret text-black rounded w-full"},null,512),[[r,t.secret]]),t.secret?(i(),p(u,{key:0,class:"mx-auto",onClick:e[16]||(e[16]=s=>w.remove())},{default:l(()=>[Q]),_:1})):_("",!0)])]),_:1})):_("",!0)])],64)}var ee=h(A,[["render",X],["__scopeId","data-v-96025f94"]]);export{ee as default};
